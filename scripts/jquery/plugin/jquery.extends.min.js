/*! tru.package 2014-10-02 */
!function(a,b,c){a.fn.starScore=function(b){var c={target:""},d=(a.extend(!0,c,b),"active");return this.each(function(b,c){function e(b){var c=a(this);return f(c),"click"==b.type&&g(c.val()),!1}function f(a){a.addClass(d).nextAll().addClass(d),a.prevAll().removeClass(d)}function g(a){h.data("score",a),i.val(a)}var h=a(c),i=a(h.data("target"));h.find("button").on("click mouseover",e),h.on("mouseleave",function(){var b=h.data("score")||0;0==b?h.find("button").removeClass(d):h.find("button").each(function(){var c=a(this);return b==c.val()?void f(c):void 0})})})},a.fn.toggler=function(b){function d(){return j.hasClass("active")?g():f(),!1}function e(b){a.log("closeHandler");var c=b.target,d=a(c),e=c.tagName,f=["A","BUTTON","INPUT","SELECT","TEXTAREA","I"];return 0===k.has(d).length&&f.indexOf(e)<0?(g(),!1):void 0}function f(){j.addClass("active"),i.beforeshow(j),k.show(i.duration),i.isDocTrigger&&a(c).on("click",e)}function g(){j.removeClass("active"),k.hide(i.duration,function(){i.hideafter(j)}),a(c).off("click",e)}var h={target:"",close:"",duration:300,isDocTrigger:!0,beforeshow:function(){},hideafter:function(){},callback:function(){}},i=a.extend(!0,h,b),j=this,k=a(i.target),l=a(i.close);k.length&&this.on("click",d),l.length&&l.on("click",function(){g()})},a.fn.itemListControl=function(b){function c(){g.find(f.layer).hide()}function d(){return a(this).closest(f.item).find(">.layer-option").hide(),!1}{var e={item:".item",layer:".layer-option",clsActive:"active",clsSelected:"selected",duration:150},f=a.extend(!0,e,b),g=this,h=this.find(f.item);h.find(f.layer)}h.on("click"," a.cart",function(){var b=a(this),d=b.closest(f.item);return"none"==d.find(">.layer-option").css("display")&&c(),d.find(">.layer-option").fadeToggle(f.duration),!1}),h.find(">.layer-option a.close").on("click",d),h.on("click","div.prd-select > input",function(){var b=a(this),c=b.closest(f.item);b.is(":checked")?c.addClass(f.clsSelected):c.removeClass(f.clsSelected)}),h.on("mouseover focusin",function(){return a(this).addClass(f.clsActive),!1}),h.on("mouseleave focusout",function(){return a(this).removeClass(f.clsActive),a(this).closest(f.item).find(">.layer-option").fadeOut(f.duration),!1}),a.isFunction(a.fn.nAdjust)&&h.find("input[name=goods_quantity]").nAdjust({readonly:!1})}}(jQuery,window,document);